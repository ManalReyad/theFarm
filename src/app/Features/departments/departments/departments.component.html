<div class="flex flex-col gap-4">
  <div class="flex justify-between items-center">
    <h1>جهات العمل</h1>

    <div class="flex gap-3">
      <app-search
        placeholder="ابحث عن جهة عمل"
        (setSearchValue)="search($event)"
        [resetSearch]="searchReset"
      ></app-search>
      <button (click)="addNew()">إضافة جهة عمل</button>
    </div>
  </div>

  <app-list
    [listColumns]="columns"
    [pageResult]="pageResult"
    (pageChange)="onPageChanged($event)"
    (edit)="edit($event)"
    (delete)="delete($event)"
    (add)="addNew()"
    [searchMode]="searchMode"
    (back)="resetSearch()"
    noDataImg="nodepartments.svg"
    noDataMessage="يبدو أنك لم تقم بإضافة أي جهة عمل بعد، ستظهر جهات العمل المضافة هنا... يمكنك البدء بإضافة أول جهة عمل "
    addButtonText="إضافة جهة عمل"
    nosearchBtnText="العودة إلى جهات العمل"
  ></app-list>
</div>

<p-dialog
  header=""
  [modal]="true"
  [(visible)]="showForm"
  [closable]="false"
  [style]="{ width: '25vw' }"
  [breakpoints]="{ '960px': '80vw' }"
>
  <div class="title">
    {{ editMode ? "تعديل جهة العمل" : "إضافة جهة عمل" }}
  </div>
  <form [formGroup]="form">
    <div class="grid grid-cols-12 mt-5">
      <div class="col-span-12">
        <app-input
          labelText="اسم جهة العمل"
          placeholder="أدخل اسم جهة العمل"
          formControlName="name"
        ></app-input>
      </div>
    </div>
  </form>

  <div class="flex justify-center gap-3 mt-5">
    <button (click)="save()" [disabled]="form.invalid">
      {{ editMode ? "حفظ" : "إضافة" }}
    </button>
    <button class="exitBtn" (click)="showWarnningMessage()">إلغاء</button>
  </div>
</p-dialog>

<app-confirmation-delete-dialog
  message="هل أنت متأكد أنك تريد حذف جهة العمل؟ سيتم حذفها نهائيًا من قائمة جهات العمل"
  [visible]="showConfirmDeleteDialog"
  (onSubmitEvent)="submitDelete()"
  (exit)="close()"
></app-confirmation-delete-dialog>

<app-success-dialog
  [visible]="showSuccessDialog"
  (onSubmitEvent)="backToList()"
  [message]="successMesg"
  btnText="عرض جهات العمل"
></app-success-dialog>

<app-confirmation-dialog
  [visible]="showWarnningDialog"
  (onSubmitEvent)="close()"
  (exit)="back()"
>
</app-confirmation-dialog>
