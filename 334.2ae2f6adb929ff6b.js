"use strict";(self.webpackChunkOurFarm=self.webpackChunkOurFarm||[]).push([[334],{3334:(L,d,n)=>{n.r(d),n.d(d,{CycleModule:()=>I});var m=n(177),c=n(2183),l=n(9731),e=n(4438),h=n(2714),f=n(7615),p=n(8975),v=n(207);function C(i,k){if(1&i){const u=e.RV6();e.j41(0,"div",6)(1,"button",7),e.bIt("click",function(){e.eBV(u);const t=e.XpG();return e.Njj(t.addNew())}),e.EFF(2,"\u0625\u0636\u0627\u0641\u0629 \u062f\u0648\u0631\u0629"),e.k0s()()}}let b=(()=>{class i{constructor(u,s){this.cycleService=u,this.router=s,this.columns=[],this.pageResult={items:[]},this.showConfirmDeleteDialog=!1,this.showSuccessDialog=!1,this.showForm=!1,this.editMode=!1,this.successMesg="",this.showWarnningDialog=!1,this.searchMode=!1,this.pageSize=10,this.pageNumber=1,this.searchReset=!1}ngOnInit(){this.intializeListCoulmns(),this.getPage()}intializeListCoulmns(){this.columns=[new l.L({field:"",hide:!1,header:"#",width:5,isIndex:!0}),new l.L({field:"name",hide:!1,header:"\u0627\u0644\u0627\u0633\u0645"}),new l.L({field:"farmName",hide:!1,header:"\u0627\u0644\u0645\u0632\u0631\u0639\u0629"}),new l.L({field:"startDate",hide:!1,header:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629",isDate:!0}),new l.L({field:"endDate",hide:!1,header:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0647\u0627\u064a\u0629",isDate:!0}),new l.L({field:"description",hide:!1,header:"\u0627\u0644\u0648\u0635\u0641"})]}getPage(){this.cycleService.getAll(this.pageNumber,this.pageSize).subscribe(u=>{u.success&&(this.pageResult=u.data)})}onPageChanged(u){this.pageNumber=u.first,this.pageSize=u.rows,this.getPage()}resetSearch(){this.searchReset=!0,this.searchMode=!1,this.pageNumber=1,this.getPage()}delete(u){this.selectedDepartment=u,this.showConfirmDeleteDialog=!0}submitDelete(){this.cycleService.delete(this.selectedDepartment.id).subscribe(u=>{u.success&&(this.successMesg="\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u062f\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d\u060c \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629",this.showSuccessDialog=!0,this.showConfirmDeleteDialog=!1)})}addNew(){this.router.navigate(["/cycle/create"])}edit(u){this.router.navigate(["/cycle/update/"+u.item.id])}close(){this.showForm=!1,this.showConfirmDeleteDialog=!1,this.showWarnningDialog=!1}backToList(){this.showForm=!1,this.showSuccessDialog=!1,this.getPage()}back(){this.showWarnningDialog=!1}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(h.I),e.rXU(c.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-cycle-listing"]],decls:8,vars:7,consts:[[1,"flex","flex-col","gap-4"],[1,"flex","justify-between","items-center"],["class","flex gap-3",4,"ngIf"],["noDataImg","nodepartments.svg","noDataMessage","\u064a\u0628\u062f\u0648 \u0623\u0646\u0643 \u0644\u0645 \u062a\u0642\u0645 \u0628\u0625\u0636\u0627\u0641\u0629 \u0623\u064a \u062f\u0648\u0631\u0629 \u0628\u0639\u062f\u060c \u0633\u062a\u0638\u0647\u0631 \u0627\u0644\u062f\u0648\u0631\u0627\u062a \u0627\u0644\u0645\u0636\u0627\u0641\u0629 \u0647\u0646\u0627... \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0628\u062f\u0621 \u0628\u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u062f\u0648\u0631\u0629 ","addButtonText","\u0625\u0636\u0627\u0641\u0629 \u062f\u0648\u0631\u0629","nosearchBtnText","\u0627\u0644\u0639\u0648\u062f\u0629 \u0625\u0644\u0649 \u0627\u0644\u062f\u0648\u0631\u0627\u062a",3,"pageChange","edit","delete","add","back","listColumns","pageResult","searchMode"],["message","\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u062f\u0648\u0631\u0629\u061f \u0633\u064a\u062a\u0645 \u062d\u0630\u0641\u0647\u0627 \u0646\u0647\u0627\u0626\u064a\u064b\u0627 \u0645\u0646 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062f\u0648\u0631\u0627\u062a",3,"onSubmitEvent","exit","visible"],["btnText","\u0639\u0631\u0636 \u0627\u0644\u062f\u0648\u0631\u0627\u062a",3,"onSubmitEvent","visible","message"],[1,"flex","gap-3"],[1,"submitBtn",3,"click"]],template:function(s,t){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3," \u0627\u0644\u062f\u0648\u0631\u0627\u062a "),e.k0s(),e.DNE(4,C,3,0,"div",2),e.k0s(),e.j41(5,"app-list",3),e.bIt("pageChange",function(r){return t.onPageChanged(r)})("edit",function(r){return t.edit(r)})("delete",function(r){return t.delete(r)})("add",function(){return t.addNew()})("back",function(){return t.resetSearch()}),e.k0s()(),e.j41(6,"app-confirmation-delete-dialog",4),e.bIt("onSubmitEvent",function(){return t.submitDelete()})("exit",function(){return t.close()}),e.k0s(),e.j41(7,"app-success-dialog",5),e.bIt("onSubmitEvent",function(){return t.backToList()}),e.k0s()),2&s&&(e.R7$(4),e.Y8G("ngIf",(null==t.pageResult.items?null:t.pageResult.items.length)>0),e.R7$(),e.Y8G("listColumns",t.columns)("pageResult",t.pageResult)("searchMode",t.searchMode),e.R7$(),e.Y8G("visible",t.showConfirmDeleteDialog),e.R7$(),e.Y8G("visible",t.showSuccessDialog)("message",t.successMesg))},dependencies:[m.bT,f.s,p.f,v.C]})}}return i})();var a=n(4341),F=n(6600),D=n(3114),y=n(4205),A=n(749),w=n(4417);let g=(()=>{class i{constructor(u,s,t,o){this.router=u,this.activatedRoute=s,this.cycleService=t,this.farmService=o,this.pages=[{name:"\u0627\u0644\u062f\u0648\u0631\u0627\u062a",route:"/cycle"},{name:"\u062a\u0633\u062c\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062f\u0648\u0631\u0629"}],this.editMode=!1,this.farmOptions=[],this.successMesg="",this.showSuccessDialog=!1}ngOnInit(){let u=this.activatedRoute.snapshot.params.id;u&&(this.getById(u),this.editMode=!0,this.pages=[{name:"\u0627\u0644\u062f\u0648\u0631\u0627\u062a",route:"/cycle"},{name:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062f\u0648\u0631\u0629"}]),this.getDropdowns(),this.createForm()}getDropdowns(){this.farmService.getList().subscribe(u=>{u.success&&(this.farmOptions=u.data)})}createForm(){this.form=new a.gE({id:new a.MJ,name:new a.MJ(null,a.k0.required),description:new a.MJ,farmID:new a.MJ(null,a.k0.required),startDate:new a.MJ(null,a.k0.required),endDate:new a.MJ})}getById(u){this.cycleService.getById(u).subscribe(s=>{s.success&&this.form.patchValue({...s.data,startDate:new Date(s.data.startDate),endDate:new Date(s.data.endDate)})})}save(){this.editMode?this.cycleService.update(this.form.value).subscribe(u=>{u.success&&(this.successMesg="\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062f\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d\u060c \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629",this.showSuccessDialog=!0)}):this.cycleService.create(this.form.value).subscribe(u=>{u.success&&(this.successMesg="\u062a\u0645\u062a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062f\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d \u060c \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629",this.showSuccessDialog=!0)})}backToList(){this.router.navigate(["/cycle"])}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(c.Ix),e.rXU(c.nX),e.rXU(h.I),e.rXU(F.K))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-cycle-form"]],decls:24,vars:8,consts:[[3,"pages"],[1,"card",3,"formGroup"],[1,"grid","grid-cols-12","gap-3"],[1,"2xl:col-span-6","xl:col-span-6","lg:col-span-6","col-span-12"],["labelText","\u0627\u0633\u0645 \u0627\u0644\u062f\u0648\u0631\u0629","placeholder","\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u062f\u0648\u0631\u0629","formControlName","name"],["labelText","\u0627\u0644\u0645\u0632\u0631\u0639\u0629","formControlName","farmID","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0632\u0631\u0639\u0629",3,"options"],["labelText","\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629","formControlName","startDate","placeholder","\u062d\u062f\u062f \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629","id","startDate"],["labelText","\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0647\u0627\u064a\u0629","formControlName","endDate","placeholder","\u062d\u062f\u062f \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0647\u0627\u064a\u0629","id","endDate"],[1,"grid","grid-cols-12","gap-3","mt-4"],[1,"col-span-12","flex","flex-col","mt-4"],["placeholder","\u0648\u0635\u0641 \u0627\u0644\u0639\u0646\u0628\u0631","cols","12","rows","4","formControlName","description",3,"required"],[1,"flex","justify-end","gap-4","mt-5"],[1,"submitBtn",3,"click","disabled"],[1,"exitBtn",3,"click"],["btnText","\u0639\u0631\u0636 \u0627\u0644\u062f\u0648\u0631\u0627\u062a",3,"onSubmitEvent","visible","message"]],template:function(s,t){1&s&&(e.j41(0,"h1"),e.EFF(1,"\u062a\u0633\u062c\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062f\u0648\u0631\u0629"),e.k0s(),e.nrm(2,"app-bread-crumb",0),e.j41(3,"form",1)(4,"div",2)(5,"div",3),e.nrm(6,"app-input",4),e.k0s(),e.j41(7,"div",3),e.nrm(8,"app-dropdown",5),e.k0s(),e.j41(9,"div",3),e.nrm(10,"app-date-input",6),e.k0s(),e.j41(11,"div",3),e.nrm(12,"app-date-input",7),e.k0s()(),e.j41(13,"div",8)(14,"div",9)(15,"label"),e.EFF(16,"\u0627\u0644\u0648\u0635\u0641"),e.k0s(),e.nrm(17,"textarea",10),e.k0s()(),e.j41(18,"div",11)(19,"button",12),e.bIt("click",function(){return t.save()}),e.EFF(20),e.k0s(),e.j41(21,"button",13),e.bIt("click",function(){return t.backToList()}),e.EFF(22,"\u0625\u0644\u063a\u0627\u0621"),e.k0s()()(),e.j41(23,"app-success-dialog",14),e.bIt("onSubmitEvent",function(){return t.backToList()}),e.k0s()),2&s&&(e.R7$(2),e.Y8G("pages",t.pages),e.R7$(),e.Y8G("formGroup",t.form),e.R7$(5),e.Y8G("options",t.farmOptions),e.R7$(9),e.Y8G("required",!1),e.R7$(2),e.Y8G("disabled",t.form.invalid),e.R7$(),e.SpI(" ",t.editMode?"\u062d\u0641\u0638":"\u0625\u0636\u0627\u0641\u0629"," "),e.R7$(3),e.Y8G("visible",t.showSuccessDialog)("message",t.successMesg))},dependencies:[D.S,y.P,A.G,w.J,p.f,a.qT,a.me,a.BC,a.cb,a.YS,a.j4,a.JD]})}}return i})();const S=[{path:"",component:b},{path:"create",component:g},{path:"update/:id",component:g}];let T=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[c.iI.forChild(S),c.iI]})}}return i})();var M=n(7671);let I=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[m.MD,T,M.G,a.X1]})}}return i})()}}]);